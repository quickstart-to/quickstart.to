---
import ContributorAvatar from './ContributorAvatar.astro';
import { getContributorsForFile } from '@utils/contributors';
import { type Lang } from '@i18n/config';
import { t } from '@utils/language';

interface Props {
  filePath: string;
  lang: Lang;
}

const { filePath, lang } = Astro.props;

const contributors = await getContributorsForFile(filePath);
---

{
  contributors.length > 0 && (
    <section class="contributor-list">
      <h3 class="contributor-title">{t(lang, 'content.contributors')}</h3>
      <div class="contributor-avatars">
        {contributors.map((c) => (
          <ContributorAvatar
            name={c.name}
            avatar={c.avatar}
            github={c.github}
            size="md"
          />
        ))}
      </div>
    </section>
  )
}

<style>
  .contributor-list {
    margin-top: 1rem;
  }

  .contributor-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text-secondary);
    margin: 0 0 0.75rem 0;
  }

  .contributor-avatars {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
</style>
