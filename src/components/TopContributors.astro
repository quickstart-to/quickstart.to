---
import ContributorAvatar from './ContributorAvatar.astro';
import { getTopContributors } from '@utils/contributors';
import { type Lang } from '@i18n/config';
import { t } from '@utils/language';

interface Props {
  lang: Lang;
  limit?: number;
}

const { lang, limit = 10 } = Astro.props;

const contributors = await getTopContributors(limit);
---

{
  contributors.length > 0 && (
    <section class="top-contributors">
      <h2 class="section-title">{t(lang, 'contributors.title')}</h2>
      <p class="section-description">{t(lang, 'contributors.description')}</p>
      <div class="contributor-wall">
        {contributors.map((c) => (
          <ContributorAvatar
            name={c.name}
            avatar={c.avatar}
            github={c.github}
            size="lg"
          />
        ))}
      </div>
      <a href="/contributors" class="view-all">
        View all contributors â†’
      </a>
    </section>
  )
}

<style>
  .top-contributors {
    text-align: center;
    padding: 3rem 0;
  }

  .section-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 0 0 0.5rem 0;
  }

  .section-description {
    color: var(--color-text-secondary);
    margin: 0 0 1.5rem 0;
  }

  .contributor-wall {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }

  .view-all {
    font-size: 0.875rem;
    color: var(--color-primary);
  }
</style>
